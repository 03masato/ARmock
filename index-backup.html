<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ARキャット キャンペーン</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Sans+JP:wght@400;700&family=Outfit:wght@700&family=M+PLUS+Rounded+1c:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">

  <!-- Three.js Import Map -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
</head>

<body>
  <!-- Main App Content (LP) -->
  <div id="app">
    <!-- Header -->
    <header class="site-header">
      <div class="container flex items-center justify-between">
        <div class="logo">Aha!デモ</div>
        <nav>
          <button class="menu-toggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </nav>
      </div>
    </header>

    <main>
      <!-- Hero Section -->
      <section class="hero">
        <div class="container text-center">
          <h1>ARキャット キャンペーン</h1>
          <p>カメラを使って猫を捕まえよう!<br>10秒間でできるだけ多くの猫をタップしてね。</p>
          <button id="start-ar-btn" class="btn btn-primary" style="margin-top: 20px;">
            ARゲームをプレイする
          </button>
        </div>
      </section>

      <!-- Flow Section -->
      <section id="flow" class="flow-section">
        <div class="container">
          <h2 class="text-center">遊び方</h2>
          <div class="steps flex-col gap-md">
            <div class="step-card">
              <span class="step-number">01</span>
              <h3>ゲーム開始</h3>
              <p>「ARゲームをプレイする」ボタンをクリック</p>
            </div>
            <div class="step-card">
              <span class="step-number">02</span>
              <h3>カメラ許可</h3>
              <p>カメラへのアクセスを許可してください</p>
            </div>
            <div class="step-card">
              <span class="step-number">03</span>
              <h3>猫を捕まえる</h3>
              <p>画面に現れる猫をタップして捕まえよう!</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Details Section -->
      <section id="details" class="details-section">
        <div class="container">
          <h2 class="text-center">キャンペーン詳細</h2>
          <div class="details-content">
            <p><strong>期間:</strong> 2024/12/01 - 2024/12/31</p>
            <p><strong>注意事項:</strong></p>
            <ul>
              <li>安全な場所でプレイしてください</li>
              <li>カメラの使用許可が必要です</li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container text-center">
        <p>&copy; 2024 AR Campaign. All rights reserved.</p>
      </div>
    </footer>
  </div>

  <!-- Game Screen (Hidden by default) -->
  <section id="game-screen" class="game-screen hidden">
    <div class="game-container">
      <!-- Camera View -->
      <div class="camera-view-container">
        <video id="camera-feed" autoplay playsinline muted></video>

        <!-- AR Cat Character -->
        <div id="ar-cat" class="ar-cat-character hidden">
          <div class="cat-name-tag">ミケ 🐱</div>
          <!-- Three.js Canvas for 3D Model -->
          <canvas id="cat-3d-canvas" class="cat-3d-canvas"></canvas>
          <div class="cat-shadow"></div>
        </div>

        <!-- AR UI Overlay -->
        <div class="ar-ui-overlay">
          <!-- Top Bar -->
          <div class="ar-top-bar">
            <div class="ar-info-panel">
              <div>📍 公園エリア</div>
              <div id="ar-distance">🎯 距離: --m</div>
            </div>
            <div class="ar-toggle-btn">📷</div>
          </div>

          <!-- Bottom Controls -->
          <div class="ar-bottom-controls">
            <div class="ar-side-button">🎒</div>
            <div id="ar-capture-btn" class="ar-capture-button"></div>
            <div class="ar-side-button">📸</div>
          </div>
        </div>
      </div>

      <!-- Pre-Game UI -->
      <div id="pre-game-ui" class="pre-game-ui">
        <h2>準備完了!</h2>
        <p>カメラに映った猫をタップして捕まえよう</p>
        <button id="start-game-btn" class="btn btn-primary">Start Game</button>
      </div>

      <!-- Game HUD (Hidden initially) -->
      <div id="game-hud" class="game-hud hidden">
        <div class="hud-item timer">残り時間: <span id="timer-display">10</span>秒</div>
        <div class="hud-item score">捕まえた猫: <span id="score-display">0</span>匹</div>
      </div>
    </div>
  </section>

  <!-- Result Section (Hidden by default) -->
  <section id="result-screen" class="result-screen hidden">
    <div class="container text-center">
      <h2>ゲーム終了!</h2>
      <div class="result-card">
        <div class="result-icon">🐱</div>
        <div class="result-label">捕まえた猫</div>
        <div id="final-score" class="final-score">0</div>
        <div class="result-message">匹</div>
      </div>
      <button id="play-again-btn" class="btn btn-primary">Play Again</button>
      <button id="back-to-top-btn" class="btn btn-secondary" style="margin-top: 10px;">トップに戻る</button>
    </div>
  </section>

  <script type="module" src="js/main.js"></script>
</body>

</html>